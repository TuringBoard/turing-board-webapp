{"ast":null,"code":"import _slicedToArray from\"/Users/sahajamatya/Desktop/Turing Board/turing-board-webapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{auth}from'../firebase';import{createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut}from'@firebase/auth';import{getFirestore,doc,setDoc}from'firebase/firestore';import{useHistory}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/React.createContext();var db=getFirestore();export var useAuth=function useAuth(){return useContext(AuthContext);};export var AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children;var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loginSuccess=_useState4[0],setLoginSuccess=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),signupSuccess=_useState6[0],setSignupSuccess=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),uid=_useState8[0],setUid=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoggedIn=_useState10[0],setIsLoggedIn=_useState10[1];var history=useHistory();var signup=function signup(email,password,firstName,lastName){createUserWithEmailAndPassword(auth,email,password).then(function(cred){return setDoc(doc(db,'users',cred.user.uid),{id:cred.user.uid,firstName:firstName,lastName:lastName});}).catch(function(error){setSignupSuccess(false);});setSignupSuccess(true);};var login=function login(email,password){signInWithEmailAndPassword(auth,email,password).catch(function(error){setLoginSuccess(false);});setLoginSuccess(true);};var logout=function logout(){signOut(auth).then(function(){setIsLoggedIn(false);history.push('/');}).catch(function(error){alert(\"An error occured: \",error);});};useEffect(function(){var unsubscribe=auth.onAuthStateChanged(function(user){user&&setUid(user.uid);setCurrentUser(user);setIsLoggedIn(true);});return unsubscribe;},[]);var value={currentUser:currentUser,isLoggedIn:isLoggedIn,signup:signup,login:login,logout:logout,loginSuccess:loginSuccess,signupSuccess:signupSuccess,uid:uid};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};","map":{"version":3,"sources":["/Users/sahajamatya/Desktop/Turing Board/turing-board-webapp/src/store/auth-context.js"],"names":["React","useContext","useEffect","useState","auth","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","getFirestore","doc","setDoc","useHistory","AuthContext","createContext","db","useAuth","AuthContextProvider","children","currentUser","setCurrentUser","loginSuccess","setLoginSuccess","signupSuccess","setSignupSuccess","uid","setUid","isLoggedIn","setIsLoggedIn","history","signup","email","password","firstName","lastName","then","cred","user","id","catch","error","login","logout","push","alert","unsubscribe","onAuthStateChanged","value"],"mappings":"kLAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,OAASC,IAAT,KAAqB,aAArB,CACA,OAASC,8BAAT,CAAyCC,0BAAzC,CAAqEC,OAArE,KAAoF,gBAApF,CACA,OAASC,YAAT,CAAuBC,GAAvB,CAA4BC,MAA5B,KAA0C,oBAA1C,CACA,OAASC,UAAT,KAA2B,cAA3B,C,2CACA,GAAMC,CAAAA,WAAW,cAAGZ,KAAK,CAACa,aAAN,EAApB,CACA,GAAMC,CAAAA,EAAE,CAAGN,YAAY,EAAvB,CAEA,MAAO,IAAMO,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACzB,MAAOd,CAAAA,UAAU,CAACW,WAAD,CAAjB,CACH,CAFM,CAIP,MAAO,IAAMI,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,CACjD,cAAsCd,QAAQ,EAA9C,wCAAOe,WAAP,eAAoBC,cAApB,eACA,eAAwChB,QAAQ,CAAC,KAAD,CAAhD,yCAAOiB,YAAP,eAAqBC,eAArB,eACA,eAA0ClB,QAAQ,CAAC,KAAD,CAAlD,yCAAOmB,aAAP,eAAsBC,gBAAtB,eACA,eAAsBpB,QAAQ,CAAC,EAAD,CAA9B,yCAAOqB,GAAP,eAAYC,MAAZ,eACA,eAAoCtB,QAAQ,CAAC,KAAD,CAA5C,0CAAOuB,UAAP,gBAAmBC,aAAnB,gBACA,GAAMC,CAAAA,OAAO,CAAGjB,UAAU,EAA1B,CACA,GAAMkB,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAQC,QAAR,CAAkBC,SAAlB,CAA6BC,QAA7B,CAA0C,CACrD5B,8BAA8B,CAACD,IAAD,CAAO0B,KAAP,CAAcC,QAAd,CAA9B,CACKG,IADL,CACU,SAAAC,IAAI,CAAI,CACV,MAAOzB,CAAAA,MAAM,CAACD,GAAG,CAACK,EAAD,CAAK,OAAL,CAAcqB,IAAI,CAACC,IAAL,CAAUZ,GAAxB,CAAJ,CAAkC,CAC3Ca,EAAE,CAAEF,IAAI,CAACC,IAAL,CAAUZ,GAD6B,CAE3CQ,SAAS,CAATA,SAF2C,CAG3CC,QAAQ,CAARA,QAH2C,CAAlC,CAAb,CAKH,CAPL,EAOOK,KAPP,CAOa,SAAAC,KAAK,CAAI,CACdhB,gBAAgB,CAAC,KAAD,CAAhB,CACH,CATL,EAUAA,gBAAgB,CAAC,IAAD,CAAhB,CACH,CAZD,CAcA,GAAMiB,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACV,KAAD,CAAQC,QAAR,CAAqB,CAC/BzB,0BAA0B,CAACF,IAAD,CAAO0B,KAAP,CAAcC,QAAd,CAA1B,CACKO,KADL,CACW,SAACC,KAAD,CAAW,CACdlB,eAAe,CAAC,KAAD,CAAf,CACH,CAHL,EAIAA,eAAe,CAAC,IAAD,CAAf,CACH,CAND,CAQA,GAAMoB,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjBlC,OAAO,CAACH,IAAD,CAAP,CAAc8B,IAAd,CAAmB,UAAM,CACrBP,aAAa,CAAC,KAAD,CAAb,CACAC,OAAO,CAACc,IAAR,CAAa,GAAb,EACH,CAHD,EAGGJ,KAHH,CAGS,SAAAC,KAAK,CAAI,CACdI,KAAK,CAAC,oBAAD,CAAuBJ,KAAvB,CAAL,CACH,CALD,EAMH,CAPD,CASArC,SAAS,CAAC,UAAM,CACZ,GAAM0C,CAAAA,WAAW,CAAGxC,IAAI,CAACyC,kBAAL,CAAwB,SAAAT,IAAI,CAAI,CAChDA,IAAI,EAAIX,MAAM,CAACW,IAAI,CAACZ,GAAN,CAAd,CACAL,cAAc,CAACiB,IAAD,CAAd,CACAT,aAAa,CAAC,IAAD,CAAb,CACH,CAJmB,CAApB,CAKA,MAAOiB,CAAAA,WAAP,CACH,CAPQ,CAON,EAPM,CAAT,CASA,GAAME,CAAAA,KAAK,CAAG,CACV5B,WAAW,CAAXA,WADU,CAEVQ,UAAU,CAAVA,UAFU,CAGVG,MAAM,CAANA,MAHU,CAIVW,KAAK,CAALA,KAJU,CAKVC,MAAM,CAANA,MALU,CAMVrB,YAAY,CAAZA,YANU,CAOVE,aAAa,CAAbA,aAPU,CAQVE,GAAG,CAAHA,GARU,CAAd,CAWA,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEsB,KAA7B,UACK7B,QADL,EADJ,CAKH,CA/DM","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { auth } from '../firebase';\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from '@firebase/auth';\nimport { getFirestore, doc, setDoc } from 'firebase/firestore';\nimport { useHistory } from 'react-router';\nconst AuthContext = React.createContext()\nconst db = getFirestore();\n\nexport const useAuth = () => {\n    return useContext(AuthContext)\n}\n\nexport const AuthContextProvider = ({ children }) => {\n    const [currentUser, setCurrentUser] = useState();\n    const [loginSuccess, setLoginSuccess] = useState(false);\n    const [signupSuccess, setSignupSuccess] = useState(false);\n    const [uid, setUid] = useState(\"\")\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n    const history = useHistory();\n    const signup = (email, password, firstName, lastName) => {\n        createUserWithEmailAndPassword(auth, email, password)\n            .then(cred => {\n                return setDoc(doc(db, 'users', cred.user.uid), {\n                    id: cred.user.uid,\n                    firstName,\n                    lastName\n                })\n            }).catch(error => {\n                setSignupSuccess(false);\n            });\n        setSignupSuccess(true);\n    }\n\n    const login = (email, password) => {\n        signInWithEmailAndPassword(auth, email, password)\n            .catch((error) => {\n                setLoginSuccess(false)\n            });\n        setLoginSuccess(true);\n    }\n\n    const logout = () => {\n        signOut(auth).then(() => {\n            setIsLoggedIn(false)\n            history.push('/');\n        }).catch(error => {\n            alert(\"An error occured: \", error)\n        });\n    }\n\n    useEffect(() => {\n        const unsubscribe = auth.onAuthStateChanged(user => {\n            user && setUid(user.uid);\n            setCurrentUser(user)\n            setIsLoggedIn(true);\n        })\n        return unsubscribe;\n    }, [])\n\n    const value = {\n        currentUser,\n        isLoggedIn,\n        signup,\n        login,\n        logout,\n        loginSuccess,\n        signupSuccess,\n        uid\n    }\n\n    return (\n        <AuthContext.Provider value={value}>\n            {children}\n        </AuthContext.Provider>\n    )\n};\n"]},"metadata":{},"sourceType":"module"}